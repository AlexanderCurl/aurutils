.TH AUR.PKGLIST 1 2022-09-13 AURUTILS
.SH NAME
aur\-pkglist \- retrieve AUR metadata archives
.
.SH SYNOPSIS
.SY "aur pkglist"
.OP \-bQiq
.OP \-t ttl
.YS
.
.SH DESCRIPTION
.B aur\-pkglist
retrieves metadata archives from the AUR, stored as
.BR git (1)
repositories. The archives include an array of package names
.RB ( pkgnames.git/pkgname.json ),
AUR users
.RB ( users.git/users.json ),
and
package bases
.RB ( pkgbases.git/pkgbase.json ).
Other metadata is available through
.RB ( metadata.git/pkgname.json ,
.BR metadata.git/pkgbase.json ).
.PP
See
.B doc/git\-archive.md
in the
.B aurweb
source tree for detailed information on these formats.
.PP
.B aur\-pkglist
defaults to retrieving
.BR pkgnames.git/pkgname.json .
.
.SH OPTIONS
.TP
.BR \-b ", " \-\-pkgbase
Retrieve
.BR pkgbases.git/pkgbase.json .
.
.TP
.BR \-n ", " \-\-pkgname
Retrieve
.BR pkgnames.git/pkgname.json .
This is the default.
.
.TP
.B \-\-users
Retrieve
.BR users.git/users.json .
.
.TP
.BR \-i ", " \-\-info
Retrieve
.BR metadata.git/pkgname.json .
.
.TP
.BR \-\-info\-pkgbase
Retrieve
.BR metadata.git/pkgbase.json .
.
.TP
.BR \-\-plain
When retrieving
.BR pkgname.json ,
.BR pkgbase.json
or
.BR users.json ,
print each entry separated by a newline.
.
.SS List retrieval options
.TP
.BR \-q ", " \-u ", " \-\-quiet
Update the package list and print its path to standard output.
.
.TP
.BR \-Q ", " \-\-systime
Use the system clock when verifying the list modification date (see
.BR \-\-time ).
This option should only be used when the clock is synchronized, for example with
NTP. If this option is not specified, new revisions are retrieved with
.BR git\-fetch (1)
on every call of
.BR aur\-pkglist .
.
.TP
.BR \-t ", " \-\-ttl
A positive integer specifying the delay in seconds for retrieving list upgrades with
.BR \-\-systime .
A negative integer skips upgrades, regardless of
.BR \-\-systime .
Defaults to
.B 600
seconds.
.PP
New lists are generated by the AUR every 10 to 15 minutes. Setting smaller
intervals with
.B \-t
will thus not give any new results.
.
.TP
.BR \-\-gc
Run
.B git\-gc \-\-aggressive
after updating metadata archives.
.
.SH ENVIRONMENT
.TP
.B AUR_LOCATION
The URI of the AUR endpoint. Defaults to
.IR https://\:aur.archlinux.org .
.
.TP
.B AUR_ARCHIVE
The parent URI for metadata archives. Defaults to the value of
.IR AUR_LOCATION .
.
.TP
.B AUR_ARCHIVE_ROOT
The parent directory where metadata archives are stored. Defaults to
.IR $XDG_STATE_HOME/aurweb\-archive .
.
.TP
.B GIT_HTTP_USER_AGENT
This variable is set to
.BR aurutils .
.
.SH NOTES
To improve performance of archive updates,
.B prefetch
tasks can be run periodically. Similarly, disk usage can be decreased with
.B gc
tasks. See
.BR git\-maintenance (1)
for details. Alternatively,
.BR git\-fetch can be run periodically with
.BR \-\-systime .
This option assumes a correctly configured (NTP-synchronized) clock.
.PP
The following threads provide more background on the AUR metadata archives:
.PP
.UR https://\:gitlab.archlinux.org/\:archlinux/\:aurweb/\:-/\:issues/\:172
RFC for new AUR Metadata Archives format + diffs
.UE ,
.PP
.UR https://lists.archlinux.org/pipermail/aur-general/2021-November/036659.html
[aur\-general] New AUR Metadata Archives
.UE ,
.PP
.UR https://\:lists.archlinux.org/\:pipermail/\:aur-dev/\:2016-May/\:004036.html
[aur\-dev] Making the package list more useful
.UE .
.
.SH SEE ALSO
.ad l
.nh
.BR aur (1),
.BR aur\-query (1),
.BR git\-fetch (1),
.BR git\-merge (1),
.BR git\-pull (1)
.
.SH AUTHORS
.MT https://github.com/AladW
Alad Wenter
.ME
.
.\" vim: set textwidth=72:
